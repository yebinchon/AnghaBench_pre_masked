
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_2__ TYPE_1__ ;


typedef int uint8_t ;
typedef int uint64_t ;
typedef int uint32_t ;
struct mii_data {int dummy; } ;
struct ifnet {int if_drv_flags; scalar_t__ if_mtu; int if_capenable; } ;
struct ether_vlan_header {int dummy; } ;
struct TYPE_2__ {int age_smb_block_paddr; int age_cmb_block_paddr; int age_tx_ring_paddr; int age_rr_ring_paddr; int age_rx_ring_paddr; } ;
struct age_softc {int age_int_mod; int age_max_frame_size; int age_flags; int age_chip_rev; int age_dma_rd_burst; int age_dma_wr_burst; int age_tick_ch; int age_dev; TYPE_1__ age_rdata; int age_miibus; struct ifnet* age_ifp; } ;
typedef int bus_addr_t ;


 int FUNC_0 (int ) ;
 int FUNC_1 (int ) ;
 int VAR_0 ;
 int VAR_1 ;
 int FUNC_2 (struct age_softc*) ;
 int VAR_2 ;
 int VAR_3 ;
 int VAR_4 ;
 int VAR_5 ;
 int VAR_6 ;
 int VAR_7 ;
 int VAR_8 ;
 int VAR_9 ;
 int VAR_10 ;
 int VAR_11 ;
 int VAR_12 ;
 int VAR_13 ;
 int VAR_14 ;
 int VAR_15 ;
 int VAR_16 ;
 int VAR_17 ;
 int VAR_18 ;
 int VAR_19 ;
 int VAR_20 ;
 int VAR_21 ;
 int VAR_22 ;
 int FUNC_3 (struct age_softc*) ;
 int VAR_23 ;
 int VAR_24 ;
 int VAR_25 ;
 int VAR_26 ;
 int VAR_27 ;
 int VAR_28 ;
 int VAR_29 ;
 int VAR_30 ;
 int VAR_31 ;
 int VAR_32 ;
 int VAR_33 ;
 int VAR_34 ;
 int VAR_35 ;
 int VAR_36 ;
 int VAR_37 ;
 int VAR_38 ;
 int FUNC_4 (int) ;
 int VAR_39 ;
 int VAR_40 ;
 int VAR_41 ;
 int VAR_42 ;
 int VAR_43 ;
 int VAR_44 ;
 int VAR_45 ;
 int VAR_46 ;
 int VAR_47 ;
 int VAR_48 ;
 int VAR_49 ;
 int VAR_50 ;
 int VAR_51 ;
 int FUNC_5 (struct age_softc*,int) ;
 int FUNC_6 (struct age_softc*,int ,int) ;
 int FUNC_7 (struct age_softc*,int,int) ;
 int VAR_52 ;
 int VAR_53 ;
 int VAR_54 ;
 int VAR_55 ;
 int VAR_56 ;
 int VAR_57 ;
 int VAR_58 ;
 int VAR_59 ;
 int VAR_60 ;
 int VAR_61 ;
 int VAR_62 ;
 scalar_t__ VAR_63 ;
 int VAR_64 ;
 scalar_t__ VAR_65 ;
 scalar_t__ VAR_66 ;
 int VAR_67 ;
 int VAR_68 ;
 int VAR_69 ;
 int VAR_70 ;
 int VAR_71 ;
 int VAR_72 ;
 int VAR_73 ;
 int VAR_74 ;
 int VAR_75 ;
 int VAR_76 ;
 int VAR_77 ;
 int VAR_78 ;
 int VAR_79 ;
 int VAR_80 ;
 int VAR_81 ;
 int VAR_82 ;
 int FUNC_8 (struct ifnet*) ;
 int VAR_83 ;
 int VAR_84 ;
 int VAR_85 ;
 int VAR_86 ;
 int VAR_87 ;
 int VAR_88 ;
 int VAR_89 ;
 int VAR_90 ;
 int VAR_91 ;
 int VAR_92 ;
 int VAR_93 ;
 int VAR_94 ;
 int VAR_95 ;
 int VAR_96 ;
 int VAR_97 ;
 int VAR_98 ;
 int VAR_99 ;
 int VAR_100 ;
 int VAR_101 ;
 int VAR_102 ;
 int VAR_103 ;
 int VAR_104 ;
 int VAR_105 ;
 int VAR_106 ;
 int VAR_107 ;
 int VAR_108 ;
 int VAR_109 ;
 int VAR_110 ;
 int VAR_111 ;
 int VAR_112 ;
 int VAR_113 ;
 int VAR_114 ;
 int VAR_115 ;
 int VAR_116 ;
 int VAR_117 ;
 int VAR_118 ;
 int VAR_119 ;
 int VAR_120 ;
 int VAR_121 ;
 int VAR_122 ;
 int VAR_123 ;
 int VAR_124 ;
 int VAR_125 ;
 int VAR_126 ;
 int VAR_127 ;
 int VAR_128 ;
 int VAR_129 ;
 int VAR_130 ;
 int VAR_131 ;
 int VAR_132 ;
 int VAR_133 ;
 int VAR_134 ;
 int VAR_135 ;
 int VAR_136 ;
 int VAR_137 ;
 int VAR_138 ;
 int VAR_139 ;
 int VAR_140 ;
 int VAR_141 ;
 int VAR_142 ;
 int VAR_143 ;
 int VAR_144 ;
 int VAR_145 ;
 int VAR_146 ;
 int VAR_147 ;
 int FUNC_9 (struct age_softc*) ;
 int FUNC_10 (struct age_softc*) ;
 int FUNC_11 (struct age_softc*) ;
 int FUNC_12 (struct age_softc*) ;
 int FUNC_13 (struct age_softc*) ;
 int FUNC_14 (struct age_softc*) ;
 int FUNC_15 (struct age_softc*) ;
 int FUNC_16 (struct age_softc*) ;
 int FUNC_17 (struct age_softc*) ;
 int VAR_148 ;
 int FUNC_18 (int ,int*,int) ;
 scalar_t__ VAR_149 ;
 int FUNC_19 (int *,int ,int ,struct age_softc*) ;
 struct mii_data* FUNC_20 (int ) ;
 int FUNC_21 (int ,char*,...) ;
 int VAR_150 ;
 int FUNC_22 (struct mii_data*) ;
 int FUNC_23 (int,int) ;

__attribute__((used)) static void
FUNC_24(struct age_softc *VAR_151)
{
 struct ifnet *VAR_152;
 struct mii_data *VAR_153;
 uint8_t VAR_154[VAR_64];
 bus_addr_t VAR_155;
 uint32_t VAR_156, VAR_157;
 uint32_t VAR_158, VAR_159, VAR_160, VAR_161;
 int VAR_162;

 FUNC_3(VAR_151);

 VAR_152 = VAR_151->age_ifp;
 VAR_153 = FUNC_20(VAR_151->age_miibus);

 if ((VAR_152->if_drv_flags & VAR_82) != 0)
  return;




 FUNC_17(VAR_151);




 FUNC_14(VAR_151);


 VAR_162 = FUNC_11(VAR_151);
        if (VAR_162 != 0) {
                FUNC_21(VAR_151->age_dev, "no memory for Rx buffers.\n");
                FUNC_17(VAR_151);
  return;
        }
 FUNC_10(VAR_151);
 FUNC_13(VAR_151);
 FUNC_9(VAR_151);
 FUNC_12(VAR_151);


 FUNC_18(FUNC_8(VAR_152), VAR_154, VAR_64);
 FUNC_7(VAR_151, VAR_25,
     VAR_154[2] << 24 | VAR_154[3] << 16 | VAR_154[4] << 8 | VAR_154[5]);
 FUNC_7(VAR_151, VAR_26, VAR_154[0] << 8 | VAR_154[1]);


 VAR_155 = VAR_151->age_rdata.age_tx_ring_paddr;
 FUNC_7(VAR_151, VAR_3, FUNC_0(VAR_155));
 VAR_155 = VAR_151->age_rdata.age_rx_ring_paddr;
 FUNC_7(VAR_151, VAR_5, FUNC_1(VAR_155));
 VAR_155 = VAR_151->age_rdata.age_rr_ring_paddr;
 FUNC_7(VAR_151, VAR_6, FUNC_1(VAR_155));
 VAR_155 = VAR_151->age_rdata.age_tx_ring_paddr;
 FUNC_7(VAR_151, VAR_9, FUNC_1(VAR_155));
 VAR_155 = VAR_151->age_rdata.age_cmb_block_paddr;
 FUNC_7(VAR_151, VAR_4, FUNC_1(VAR_155));
 VAR_155 = VAR_151->age_rdata.age_smb_block_paddr;
 FUNC_7(VAR_151, VAR_8, FUNC_1(VAR_155));

 FUNC_7(VAR_151, VAR_7,
     ((VAR_27 << VAR_55) &
     VAR_54) |
     ((VAR_32 << VAR_53) & VAR_52));

 FUNC_7(VAR_151, VAR_10,
     (VAR_38 << VAR_57) & VAR_56);


 FUNC_7(VAR_151, VAR_11, VAR_58);
 FUNC_2(VAR_151);


 FUNC_7(VAR_151, VAR_22,
     ((VAR_86 << VAR_88) & VAR_87) |
     ((VAR_83 << VAR_85) & VAR_84) |
     ((VAR_92 << VAR_94) & VAR_93) |
     ((VAR_89 << VAR_91) & VAR_90));


 FUNC_7(VAR_151, VAR_16,
     ((VAR_74 << VAR_76) &
     VAR_75) |
     ((VAR_77 << VAR_79) &
     VAR_78) | VAR_70 |
     ((VAR_67 << VAR_69) &
     VAR_68) |
     ((VAR_71 << VAR_73) &
     VAR_72));


 FUNC_6(VAR_151, VAR_17, FUNC_4(VAR_151->age_int_mod));
 VAR_156 = FUNC_5(VAR_151, VAR_24);
 VAR_156 &= ~VAR_106;
 if (FUNC_4(VAR_151->age_int_mod) == 0)
  VAR_156 &= ~VAR_105;
 else
  VAR_156 |= VAR_105;
 FUNC_7(VAR_151, VAR_24, VAR_156);
 if (VAR_149)
  FUNC_21(VAR_151->age_dev, "interrupt moderation is %d us.\n",
      VAR_151->age_int_mod);
 FUNC_6(VAR_151, VAR_19, FUNC_4(1000));


 if (VAR_152->if_mtu < VAR_63)
  VAR_151->age_max_frame_size = VAR_63;
 else
  VAR_151->age_max_frame_size = VAR_152->if_mtu;
 VAR_151->age_max_frame_size += VAR_66 +
     sizeof(struct ether_vlan_header) + VAR_65;
 FUNC_7(VAR_151, VAR_15, VAR_151->age_max_frame_size);

 VAR_157 = FUNC_23(VAR_151->age_max_frame_size, sizeof(uint64_t));
 FUNC_7(VAR_151, VAR_30,
     (((VAR_157 / sizeof(uint64_t)) <<
     VAR_128) & VAR_127) |
     ((VAR_122 <<
     VAR_124) & VAR_123) |
     ((FUNC_4(8) << VAR_126) &
     VAR_125));


 if ((VAR_151->age_flags & VAR_14) != 0) {




  FUNC_7(VAR_151, 0x12FC, 0x6500);




  FUNC_7(VAR_151, 0x1008, FUNC_5(VAR_151, 0x1008) | 0x8000);
 }







 switch (VAR_151->age_chip_rev) {
 case 0x8001:
 case 0x9001:
 case 0x9002:
 case 0x9003:
  VAR_158 = VAR_32 / 16;
  VAR_159 = (VAR_32 * 7) / 8;
  VAR_160 = (VAR_27 * 7) / 8;
  VAR_161 = VAR_27 / 16;
  break;
 default:
  VAR_156 = FUNC_5(VAR_151, VAR_35);
  VAR_159 = VAR_156 / 16;
  if (VAR_159 < 192)
   VAR_159 = 192;
  VAR_158 = (VAR_156 * 7) / 8;
  if (VAR_158 < VAR_159)
   VAR_158 = VAR_159 + 16;
  VAR_156 = FUNC_5(VAR_151, VAR_34);
  VAR_161 = VAR_156 / 8;
  VAR_160 = (VAR_156 * 7) / 8;
  if (VAR_161 < 2)
   VAR_161 = 2;
  if (VAR_160 < VAR_161)
   VAR_160 = VAR_161 + 3;
  break;
 }
 FUNC_7(VAR_151, VAR_29,
     ((VAR_159 << VAR_121) &
     VAR_120) |
     ((VAR_158 << VAR_119) &
     VAR_118));
 FUNC_7(VAR_151, VAR_31,
     ((VAR_161 << VAR_132) &
     VAR_131) |
     ((VAR_160 << VAR_130) &
     VAR_129));


 FUNC_7(VAR_151, VAR_28,
     ((VAR_109 << VAR_111) &
     VAR_110) |
     ((VAR_115 <<
     VAR_117) & VAR_116) |
     ((VAR_112 <<
     VAR_114) & VAR_113) |
     VAR_107 | VAR_108);


 FUNC_7(VAR_151, VAR_36,
     ((VAR_134 << VAR_136) &
     VAR_135) |
     ((VAR_140 << VAR_142) &
     VAR_141) |
     ((VAR_137 <<
     VAR_139) & VAR_138) |
     VAR_133);

 FUNC_7(VAR_151, VAR_37,
     (((VAR_157 / sizeof(uint64_t) << VAR_147)) &
     VAR_146) |
     ((VAR_143 << VAR_145) &
     VAR_144));

 FUNC_7(VAR_151, VAR_12,
     VAR_59 | VAR_60 |
     VAR_151->age_dma_rd_burst | VAR_61 |
     VAR_151->age_dma_wr_burst | VAR_62);


 FUNC_7(VAR_151, VAR_0,
     ((VAR_40 << VAR_42) &
     VAR_41) |
     ((VAR_43 << VAR_45) &
     VAR_44));


 FUNC_7(VAR_151, VAR_1,
     ((FUNC_4(2) << VAR_49) & VAR_48) |
     ((FUNC_4(2) << VAR_47) & VAR_46));

 FUNC_7(VAR_151, VAR_33, FUNC_4(1000 * 1000));
 FUNC_7(VAR_151, VAR_2, VAR_51 | VAR_50);





 FUNC_7(VAR_151, VAR_39, 0);
 FUNC_7(VAR_151, VAR_23,
     VAR_103 | VAR_102 |
     VAR_95 | VAR_101 |
     ((VAR_96 << VAR_98) &
     VAR_97));

 FUNC_15(VAR_151);
 FUNC_16(VAR_151);

 VAR_156 = FUNC_5(VAR_151, VAR_23);
 if ((VAR_152->if_capenable & VAR_80) != 0)
  VAR_156 |= VAR_99;


 FUNC_7(VAR_151, VAR_21, 0);
 FUNC_7(VAR_151, VAR_20, VAR_18);


 FUNC_7(VAR_151, VAR_23, VAR_156 | VAR_104 | VAR_100);

 VAR_151->age_flags &= ~VAR_13;

 FUNC_22(VAR_153);

 FUNC_19(&VAR_151->age_tick_ch, VAR_150, VAR_148, VAR_151);

 VAR_152->if_drv_flags |= VAR_82;
 VAR_152->if_drv_flags &= ~VAR_81;
}
