
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






typedef int buffer ;


 int EXIT_SHELL ;
 int exit (int ) ;
 int printf (char*) ;
 int read (int ,char*,int) ;
 int send (int,char*,int,int ) ;
 int strlen (int ) ;
 int strncmp (char*,int ,int ) ;

void cmdshell(int sock)
{
 int length=666;
 char buffer[1024];

while(length) {
  length=read(0,buffer,sizeof(buffer));
  buffer[length]=0;
  if(!strncmp(buffer,EXIT_SHELL,strlen(EXIT_SHELL))) {
   send(sock,"exit\r\n",6,0);
   break;
   }
  length=send(sock,buffer,length,0);
  if (length<=0) {
   printf("[i] Connection closed.\n");
   exit(0);
  }
 }
 printf("[i] Connection successfully exited.\r\n");
 exit(0);
}
