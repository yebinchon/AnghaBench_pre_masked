
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_2__ TYPE_1__ ;


struct tep_handle {int dummy; } ;
struct tep_format_field {char* name; int flags; struct tep_format_field* next; } ;
struct TYPE_2__ {struct tep_format_field* fields; } ;
struct tep_event {char* system; char* name; TYPE_1__ format; } ;
typedef int FILE ;


 int VAR_0 ;
 int VAR_1 ;
 int VAR_2 ;
 int VAR_3 ;
 int VAR_4 ;
 int VAR_5 ;
 int VAR_6 ;
 int FUNC_0 (int *) ;
 int * FUNC_1 (char*,char*) ;
 int FUNC_2 (int *,char*,...) ;
 int FUNC_3 (char*,char*,char const*) ;
 int * VAR_7 ;
 int FUNC_4 (struct tep_handle*) ;
 struct tep_event** FUNC_5 (struct tep_handle*,int ) ;

__attribute__((used)) static int FUNC_6(struct tep_handle *VAR_8, const char *VAR_9)
{
 int VAR_10, VAR_11, VAR_12, VAR_13;
 struct tep_event **VAR_14;
 struct tep_event *VAR_15 = ((void*)0);
 struct tep_format_field *VAR_16;
 char VAR_17[VAR_0];
 FILE *VAR_18;

 FUNC_3(VAR_17, "%s.py", VAR_9);
 VAR_18 = FUNC_1(VAR_17, "w");
 if (VAR_18 == ((void*)0)) {
  FUNC_2(VAR_7, "couldn't open %s\n", VAR_17);
  return -1;
 }
 FUNC_2(VAR_18, "# perf script event handlers, "
  "generated by perf script -g python\n");

 FUNC_2(VAR_18, "# Licensed under the terms of the GNU GPL"
  " License version 2\n\n");

 FUNC_2(VAR_18, "# The common_* event handler fields are the most useful "
  "fields common to\n");

 FUNC_2(VAR_18, "# all events.  They don't necessarily correspond to "
  "the 'common_*' fields\n");

 FUNC_2(VAR_18, "# in the format files.  Those fields not available as "
  "handler params can\n");

 FUNC_2(VAR_18, "# be retrieved using Python functions of the form "
  "common_*(context).\n");

 FUNC_2(VAR_18, "# See the perf-script-python Documentation for the list "
  "of available functions.\n\n");

 FUNC_2(VAR_18, "from __future__ import print_function\n\n");
 FUNC_2(VAR_18, "import os\n");
 FUNC_2(VAR_18, "import sys\n\n");

 FUNC_2(VAR_18, "sys.path.append(os.environ['PERF_EXEC_PATH'] + \\\n");
 FUNC_2(VAR_18, "\t'/scripts/python/Perf-Trace-Util/lib/Perf/Trace')\n");
 FUNC_2(VAR_18, "\nfrom perf_trace_context import *\n");
 FUNC_2(VAR_18, "from Core import *\n\n\n");

 FUNC_2(VAR_18, "def trace_begin():\n");
 FUNC_2(VAR_18, "\tprint(\"in trace_begin\")\n\n");

 FUNC_2(VAR_18, "def trace_end():\n");
 FUNC_2(VAR_18, "\tprint(\"in trace_end\")\n\n");

 VAR_13 = FUNC_4(VAR_8);
 VAR_14 = FUNC_5(VAR_8, VAR_1);

 for (VAR_10 = 0; VAR_14 && VAR_10 < VAR_13; VAR_10++) {
  VAR_15 = VAR_14[VAR_10];
  FUNC_2(VAR_18, "def %s__%s(", VAR_15->system, VAR_15->name);
  FUNC_2(VAR_18, "event_name, ");
  FUNC_2(VAR_18, "context, ");
  FUNC_2(VAR_18, "common_cpu,\n");
  FUNC_2(VAR_18, "\tcommon_secs, ");
  FUNC_2(VAR_18, "common_nsecs, ");
  FUNC_2(VAR_18, "common_pid, ");
  FUNC_2(VAR_18, "common_comm,\n\t");
  FUNC_2(VAR_18, "common_callchain, ");

  VAR_11 = 0;
  VAR_12 = 0;

  for (VAR_16 = VAR_15->format.fields; VAR_16; VAR_16 = VAR_16->next) {
   if (VAR_11++)
    FUNC_2(VAR_18, ", ");
   if (++VAR_12 % 5 == 0)
    FUNC_2(VAR_18, "\n\t");

   FUNC_2(VAR_18, "%s", VAR_16->name);
  }
  if (VAR_11++)
   FUNC_2(VAR_18, ", ");
  if (++VAR_12 % 5 == 0)
   FUNC_2(VAR_18, "\n\t\t");
  FUNC_2(VAR_18, "perf_sample_dict");

  FUNC_2(VAR_18, "):\n");

  FUNC_2(VAR_18, "\t\tprint_header(event_name, common_cpu, "
   "common_secs, common_nsecs,\n\t\t\t"
   "common_pid, common_comm)\n\n");

  FUNC_2(VAR_18, "\t\tprint(\"");

  VAR_11 = 0;
  VAR_12 = 0;

  for (VAR_16 = VAR_15->format.fields; VAR_16; VAR_16 = VAR_16->next) {
   if (VAR_11++)
    FUNC_2(VAR_18, ", ");
   if (VAR_12 && VAR_12 % 3 == 0) {
    FUNC_2(VAR_18, "\" \\\n\t\t\"");
   }
   VAR_12++;

   FUNC_2(VAR_18, "%s=", VAR_16->name);
   if (VAR_16->flags & VAR_5 ||
       VAR_16->flags & VAR_3 ||
       VAR_16->flags & VAR_2 ||
       VAR_16->flags & VAR_6)
    FUNC_2(VAR_18, "%%s");
   else if (VAR_16->flags & VAR_4)
    FUNC_2(VAR_18, "%%d");
   else
    FUNC_2(VAR_18, "%%u");
  }

  FUNC_2(VAR_18, "\" %% \\\n\t\t(");

  VAR_11 = 0;
  VAR_12 = 0;

  for (VAR_16 = VAR_15->format.fields; VAR_16; VAR_16 = VAR_16->next) {
   if (VAR_11++)
    FUNC_2(VAR_18, ", ");

   if (++VAR_12 % 5 == 0)
    FUNC_2(VAR_18, "\n\t\t");

   if (VAR_16->flags & VAR_3) {
    if ((VAR_12 - 1) % 5 != 0) {
     FUNC_2(VAR_18, "\n\t\t");
     VAR_12 = 4;
    }
    FUNC_2(VAR_18, "flag_str(\"");
    FUNC_2(VAR_18, "%s__%s\", ", VAR_15->system,
     VAR_15->name);
    FUNC_2(VAR_18, "\"%s\", %s)", VAR_16->name,
     VAR_16->name);
   } else if (VAR_16->flags & VAR_6) {
    if ((VAR_12 - 1) % 5 != 0) {
     FUNC_2(VAR_18, "\n\t\t");
     VAR_12 = 4;
    }
    FUNC_2(VAR_18, "symbol_str(\"");
    FUNC_2(VAR_18, "%s__%s\", ", VAR_15->system,
     VAR_15->name);
    FUNC_2(VAR_18, "\"%s\", %s)", VAR_16->name,
     VAR_16->name);
   } else
    FUNC_2(VAR_18, "%s", VAR_16->name);
  }

  FUNC_2(VAR_18, "))\n\n");

  FUNC_2(VAR_18, "\t\tprint('Sample: {'+"
   "get_dict_as_string(perf_sample_dict['sample'], ', ')+'}')\n\n");

  FUNC_2(VAR_18, "\t\tfor node in common_callchain:");
  FUNC_2(VAR_18, "\n\t\t\tif 'sym' in node:");
  FUNC_2(VAR_18, "\n\t\t\t\tprint(\"\\t[%%x] %%s\" %% (node['ip'], node['sym']['name']))");
  FUNC_2(VAR_18, "\n\t\t\telse:");
  FUNC_2(VAR_18, "\n\t\t\t\tprint(\"\t[%%x]\" %% (node['ip']))\n\n");
  FUNC_2(VAR_18, "\t\tprint()\n\n");

 }

 FUNC_2(VAR_18, "def trace_unhandled(event_name, context, "
  "event_fields_dict, perf_sample_dict):\n");

 FUNC_2(VAR_18, "\t\tprint(get_dict_as_string(event_fields_dict))\n");
 FUNC_2(VAR_18, "\t\tprint('Sample: {'+"
  "get_dict_as_string(perf_sample_dict['sample'], ', ')+'}')\n\n");

 FUNC_2(VAR_18, "def print_header("
  "event_name, cpu, secs, nsecs, pid, comm):\n"
  "\tprint(\"%%-20s %%5u %%05u.%%09u %%8u %%-20s \" %% \\\n\t"
  "(event_name, cpu, secs, nsecs, pid, comm), end=\"\")\n\n");

 FUNC_2(VAR_18, "def get_dict_as_string(a_dict, delimiter=' '):\n"
  "\treturn delimiter.join"
  "(['%%s=%%s'%%(k,str(v))for k,v in sorted(a_dict.items())])\n");

 FUNC_0(VAR_18);

 FUNC_2(VAR_7, "generated Python script: %s\n", VAR_17);

 return 0;
}
