
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_2__ TYPE_1__ ;


struct TYPE_2__ {char* name; char* origin; struct TYPE_2__* next; } ;
typedef TYPE_1__ stub ;
typedef int line ;
typedef int FILE ;


 int FUNC_0 (int *) ;
 scalar_t__ FUNC_1 (char*,int,int *) ;
 int * FUNC_2 (char*,char*) ;
 int FUNC_3 (int *,char*,...) ;
 scalar_t__ FUNC_4 (char) ;
 scalar_t__ FUNC_5 (int) ;
 int FUNC_6 (char*,char*,int) ;
 int FUNC_7 (int *) ;
 int * FUNC_8 (char*,char*) ;
 int FUNC_9 (char*,int,char*,char*,...) ;
 int VAR_0 ;
 char* FUNC_10 (char*,char) ;
 int FUNC_11 (char*,char*) ;
 void* FUNC_12 (char*) ;
 char* FUNC_13 (char*,char) ;
 char* FUNC_14 (char*,char*) ;
 int FUNC_15 (char*) ;

int FUNC_16( int VAR_1, char **VAR_2 ) {
    char VAR_3[1024];
    char *VAR_4 = "make";
    char *VAR_5 = "nm";
    char *VAR_6 = "unknown.a";
    stub *VAR_7 = ((void*)0), *VAR_8, *VAR_9 = ((void*)0), *VAR_10;
    FILE *VAR_11, *VAR_12;
    int VAR_13, VAR_14 = VAR_1;
    FILE *VAR_15 = FUNC_2("tests/stubs.tst","w");

    if( VAR_1 == 1 ) {
        if( VAR_15 ) FUNC_0( VAR_15 );
        FUNC_15(VAR_2[0]);
        return 1;
    }

    if( !VAR_15 ) {
        FUNC_3( &VAR_0, "Could not write file tests/stubs.tst\n" );
        return 1;
    }

    FUNC_3( VAR_15, "# Automatically generated by stubgen\n" );

    for( VAR_13 = 1; VAR_13 < VAR_1; VAR_13++ ) {
        if( !FUNC_11( VAR_2[VAR_13], "-m" ) ) {
            VAR_4 = VAR_2[VAR_13+1];
            VAR_13++;
        } else if( !FUNC_11( VAR_2[VAR_13], "-n" ) ) {
            VAR_5 = VAR_2[VAR_13+1];
            VAR_13++;
        } else { VAR_14 = VAR_13; break; }
    }

    FUNC_9( VAR_3, sizeof(VAR_3), "%s test 2>&1", VAR_4 );
    VAR_11 = FUNC_8( VAR_3, "r" );

    if( !VAR_11 ) {
        FUNC_0( VAR_15 );
        FUNC_3( &VAR_0, "Could not run %s test\n", VAR_4 );
        return 1;
    }

    while( FUNC_1( VAR_3, sizeof(VAR_3), VAR_11 ) ) {
        char *VAR_16;
        char *VAR_17, *VAR_18;

        if( !FUNC_14( VAR_3, "undefined reference to" ) ) continue;

        VAR_16 = FUNC_13( VAR_3, ':' );

        if( !VAR_16 ) continue;

        VAR_17 = FUNC_10( VAR_16, '`' );
        VAR_18 = FUNC_10( VAR_16, '\'' );

        if( !VAR_17 || !VAR_18 ) continue;

        VAR_17 += 2;

        FUNC_6( VAR_3, VAR_17, VAR_18 - VAR_17 );
        VAR_3[VAR_18 - VAR_17] = 0;

        for( VAR_8 = VAR_7; VAR_8; VAR_8 = VAR_8->next )
            if( !FUNC_11( VAR_8->name, VAR_3 ) ) break;

        if( VAR_8 ) continue;

        VAR_8 = (stub *)FUNC_5( sizeof(stub) );
        if( !VAR_8 )
        {
            FUNC_3( &VAR_0, "Out of memory\n" );
            FUNC_0( VAR_15 );
            FUNC_7( VAR_11 );
            return 1;
        }

        VAR_8->name = FUNC_12( VAR_3 );
        VAR_8->next = VAR_7;
        VAR_7 = VAR_8;
    }


    for( VAR_13 = VAR_14; VAR_13 < VAR_1; VAR_13++ ) {
        FUNC_9( VAR_3, sizeof(VAR_3), "%s %s", VAR_5, VAR_2[VAR_13] );
        VAR_12 = FUNC_8( VAR_3, "r" );

        for( VAR_6 = VAR_2[VAR_13]; *VAR_2[VAR_13]; VAR_2[VAR_13]++ )
            if( *VAR_2[VAR_13] == '/' || *VAR_2[VAR_13] == '\\' )
                VAR_6 = VAR_2[VAR_13] + 1;


        if( !VAR_12 ) {
            FUNC_3( &VAR_0, "Could not run %s\n", VAR_3 );
            continue;
        }

        while( FUNC_1( VAR_3, sizeof(VAR_3), VAR_12 ) ) {
            char *VAR_19, *VAR_20;

            if( !(VAR_19 = FUNC_14( VAR_3, " I " )) ) continue;

            VAR_19 += 3;
            while( *VAR_19 && FUNC_4(*VAR_19) ) VAR_19++;


            for( VAR_20 = VAR_19; *VAR_20 && !FUNC_4(*VAR_20); VAR_20++ );

            *VAR_20 = 0;

            for( VAR_8 = VAR_9; VAR_8; VAR_8 = VAR_8->next )
                if( !FUNC_11( VAR_8->name, VAR_19 ) ) break;

            if( VAR_8 ) continue;

            VAR_8 = (stub *)FUNC_5( sizeof(stub) );
            if( !VAR_8 )
            {
                FUNC_3( &VAR_0, "Out of memory\n" );
                FUNC_0( VAR_15 );
                FUNC_7( VAR_11 );
                FUNC_7( VAR_12 );
                return 1;
            }

            VAR_8->name = FUNC_12( VAR_19 + 1 );
            VAR_8->origin = VAR_6;
            VAR_8->next = VAR_9;
            VAR_9 = VAR_8;
        }

        FUNC_7( VAR_12 );
    }



    for( VAR_8 = VAR_7; VAR_8; VAR_8 = VAR_8->next ) {
        for( VAR_10 = VAR_9; VAR_10; VAR_10 = VAR_10->next ) {
            if( !FUNC_11( VAR_8->name, VAR_10->name ) ) {
                FUNC_3( VAR_15, "%s %s\n", VAR_10->origin, VAR_10->name );
                continue;
            }
        }
    }

    FUNC_0( VAR_15 );
    FUNC_7( VAR_11 );
    return 0;
}
